# Renderer Plugins

This is a __DRAFT__. No implementation is currently done.

The goal of a renderer-plugin is to provide special features / semantics to a single post. An example would be the replacement of smilies with an image or a Yes/No/Maybe switchbox, where everybody can note his status (compare Google Wave).

Things, that a Component should be able to do:

 * Replace text-snippets when they are written, e.g. smilies or common typos
 * Insert a custom graphical element with special action handlers into the post

## API

The API must provide a way for the plugin to add an action-button to the action bar. This button should appear, when the user edits a post. By clicking this button, the user fires a handler, which should create the initial snippet in the post.

    MyPlugin.prototype.addActionButtons = function(bar) {
      var that = this;
        $('<button>').text('YNM').appendTo(bar).click(
          function() {
            helper.insert(this.createNewSnippet());
          }
        );
    }
 
In this example, the plugin would add a YNM button to the bar, which inserts a html-string upon click.
    
After the initial insert, the view should trigger a rerender, which fires the plugin's renderContent():

    CustomComponent.prototype.initializePostElement = function(post, element, editing) {
      $('.yesnomaybe_widget .yes_option').off('click').
         click(function() {
        // Change the post to represent the changed content 
      });
    }
    
Here the plugin can register the proper event handlers. It should make sure, that any previous handler gets killed and that there might be multiple snippets generated by this plugin in one post.


## Caveats
Since the post is made editable with the html *contenteditable="true"* all sub-elements are also editable. When inserting a custom element into the post the component shopuld add a *contenteditable="false"* to prevent the user from 'editing' it. Also the component should make sure there is a place for the user to continue editing below the inserted element.

## Example 1: Smilies

The functionality of the smilies-component is simple: When you write _:-)_ it replaces it with a smily-image.

## Example 2: Yes/No/Maybe

The functionality of the yes-no-maybe is equal to the one from [Google Wave][1]. When editing a post, you have an additional action to insert a yes/no/maybe element into the post.

Here the user can click on one of the three columns to define her state: Yes, No or Maybe. The avatar and name of the user is then added to the column, so other users can see the state.

[1]: http://wave.google.com